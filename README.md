

##  AI 기반 카테고리 자동 분류 시스템

**Asis**는 사용자가 입력한 할 일 문장을 기반으로, **의미 기반 AI 분류 시스템을 통해 자동으로 적절한 카테고리를 추천**하는 기능을 제공합니다.

> 단순 키워드 매칭이 아닌, **문장의 의미 임베딩 → 코사인 유사도 비교**를 기반으로 동작하며, 기존 투두리스트의 번거로운 카테고리 설정 문제를 해결합니다.

---

###  AI 분류 흐름도

1. **입력 수집**
   - 사용자가 ToDo 제목을 입력하면 Spring Boot 서버가 이를 AI 서버로 전송합니다.

2. **LLM 기반 텍스트 분석**
   - `Ollama` 환경에서 로컬 실행되는 **Llama2 모델**을 사용하여 자연어 문장을 분석합니다.
   - 초기에는 `mistral` 모델을 사용했으나, **서버 메모리 부족으로 인해 llama2로 교체**하여 안정성을 확보했습니다.

3. **의미 임베딩 생성**
   - `SentenceTransformer`를 활용해 문장을 **768차원 벡터로 변환**합니다.

4. **유사도 비교 및 카테고리 추천**
   - DB에 저장된 카테고리 벡터들과 **코사인 유사도**를 비교하여 가장 유사한 카테고리를 반환합니다.

5. **임베딩 저장**
   - 추천된 카테고리 벡터는 `.tolist()`로 변환 후 JSON으로 직렬화되어 **MySQL에 저장**됩니다.

---

###  반환 형식 예시

```json
{
  "category": "운동",
  "similarity": 0.85,
  "embedding": [0.15, -0.33, 0.27, ...]
}
```

---

### 🛠 트러블슈팅 요약

#### 문제 1. LLM 미작동 → 항상 “기타” 반환
- 원인: mistral 모델의 메모리 부족
- 해결: llama2로 교체 + AI 응답 전처리 개선 (인용부호 제거, 첫 단어 추출)

#### 문제 2. 벡터 저장 실패 (`ndarray` 직렬화 오류)
- 원인: `ndarray`는 JSON 직렬화 불가
- 해결: `.tolist()` 변환 후 저장 → 저장 공간 38% 감소, 조회 속도 220ms → 75ms 개선

---
